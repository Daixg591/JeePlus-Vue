(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-workbench-task-HistoryList"],{"0b8e":function(t,e,n){"use strict";var i=n("72e3"),o=n.n(i);o.a},"15b8":function(t,e,n){(function(e){n("efe9"),n("99af"),n("d3b7"),n("25f0");var i=1/0,o=9007199254740991,s="[object Arguments]",a="[object Function]",c="[object GeneratorFunction]",r="[object Symbol]",l="object"==typeof e&&e&&e.Object===Object&&e,u="object"==typeof self&&self&&self.Object===Object&&self,f=l||u||Function("return this")();function d(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function h(t,e){var n=-1,i=t?t.length:0,o=Array(i);while(++n<i)o[n]=e(t[n],n,t);return o}function v(t,e){var n=-1,i=e.length,o=t.length;while(++n<i)t[o+n]=e[n];return t}var p=Object.prototype,m=p.hasOwnProperty,b=p.toString,y=f.Symbol,w=p.propertyIsEnumerable,g=y?y.isConcatSpreadable:void 0,k=Math.max;function x(t,e,n,i,o){var s=-1,a=t.length;n||(n=C),o||(o=[]);while(++s<a){var c=t[s];e>0&&n(c)?e>1?x(c,e-1,n,i,o):v(o,c):i||(o[o.length]=c)}return o}function T(t,e){return t=Object(t),I(t,e,(function(e,n){return n in t}))}function I(t,e,n){var i=-1,o=e.length,s={};while(++i<o){var a=e[i],c=t[a];n(c,a)&&(s[a]=c)}return s}function _(t,e){return e=k(void 0===e?t.length-1:e,0),function(){var n=arguments,i=-1,o=k(n.length-e,0),s=Array(o);while(++i<o)s[i]=n[e+i];i=-1;var a=Array(e+1);while(++i<e)a[i]=n[i];return a[e]=s,d(t,this,a)}}function C(t){return j(t)||S(t)||!!(g&&t&&t[g])}function D(t){if("string"==typeof t||N(t))return t;var e=t+"";return"0"==e&&1/t==-i?"-0":e}function S(t){return O(t)&&m.call(t,"callee")&&(!w.call(t,"callee")||b.call(t)==s)}var j=Array.isArray;function E(t){return null!=t&&B(t.length)&&!$(t)}function O(t){return M(t)&&E(t)}function $(t){var e=R(t)?b.call(t):"";return e==a||e==c}function B(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=o}function R(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function M(t){return!!t&&"object"==typeof t}function N(t){return"symbol"==typeof t||M(t)&&b.call(t)==r}var W=_((function(t,e){return null==t?{}:T(t,h(x(e,1),D))}));t.exports=W}).call(this,n("c8ba"))},"186d":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={data:function(){return{mescroll:null}},onPullDownRefresh:function(){this.mescroll&&this.mescroll.onPullDownRefresh()},onPageScroll:function(t){this.mescroll&&this.mescroll.onPageScroll(t)},onReachBottom:function(){this.mescroll&&this.mescroll.onReachBottom()},methods:{mescrollInit:function(t){this.mescroll=t,this.mescrollInitByRef()},mescrollInitByRef:function(){if(!this.mescroll||!this.mescroll.resetUpScroll){var t=this.$refs.mescrollRef;t&&(this.mescroll=t.mescroll)}},downCallback:function(){var t=this;this.mescroll.optUp.use?this.mescroll.resetUpScroll():setTimeout((function(){t.mescroll.endSuccess()}),500)},upCallback:function(){var t=this;setTimeout((function(){t.mescroll.endErr()}),500)}},mounted:function(){this.mescrollInitByRef()}},o=i;e.default=o},"5fd2":function(t,e,n){"use strict";n.r(e);var i=n("8c1e"),o=n.n(i);for(var s in i)"default"!==s&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e["default"]=o.a},"612c":function(t,e,n){"use strict";n("a9e3"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={props:{i:Number,index:{type:Number,default:function(){return 0}}},data:function(){return{downOption:{auto:!1},upOption:{auto:!1},isInit:!1}},watch:{index:function(t){this.i!==t||this.isInit||(this.isInit=!0,this.mescroll&&this.mescroll.triggerDownScroll())}},methods:{mescrollInit:function(t){this.mescroll=t,this.mescrollInitByRef&&this.mescrollInitByRef(),this.i===this.index&&(this.isInit=!0,this.mescroll.triggerDownScroll())}}},o=i;e.default=o},"72e3":function(t,e,n){var i=n("a613");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var o=n("4f06").default;o("26d6ac4c",i,!0,{sourceMap:!1,shadowMode:!1})},"8c1e":function(t,e,n){"use strict";var i=n("ee27");n("99af"),n("a9e3"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=i(n("f3f3")),s=i(n("186d")),a=i(n("612c")),c=i(n("15b8")),r={mixins:[s.default,a.default],props:{i:Number,index:{type:Number,default:function(){return 0}},tabs:{type:Array,default:function(){return[]}}},data:function(){return{upOption:{noMoreSize:3,empty:{tip:"~ 搜索无结果 ~"}},CustomBar:this.CustomBar,list:[],modalName:null,curWord:""}},methods:{inputWord:function(t){var e=this;this.searchTimer&&clearTimeout(this.searchTimer),this.searchTimer=setTimeout((function(){e.doSearch(e.curWord)}),300)},doSearch:function(t){this.curWord=t,this.list=[],this.mescroll.resetUpScroll()},upCallback:function(t){var e=this;this.$http.get("/app/flowable/task/historic/",{pageNo:t.num,pageSize:t.size,status:"1",title:this.curWord}).then((function(n){var i=n.data,o=i.page.list;e.mescroll.endBySize(o.length,i.page.count),1==t.num&&(e.list=[]),e.list=e.list.concat(o)})).catch((function(t){e.mescroll.endErr()}))},toDetail:function(t){this.$http.get("/app/flowable/task/getTaskDef",{taskDefKey:t.taskDefinitionKey,procInsId:t.processInstanceId,procDefId:t.processDefinitionId}).then((function(e){var n=e.data;if(n.success){var i=(0,o.default)({readOnly:!0,taskId:t.executionId,title:"".concat(t.name,"【").concat(t.name,"】"),formTitle:"".concat(t.name)},(0,c.default)(n.flow,"formType","formUrl","procDefKey","taskDefKey","procInsId","procDefId","taskId","status","title","businessId"));uni.navigateTo({url:"/pages/workbench/task/TaskFormDetail?flow="+JSON.stringify(i)})}}))},callback:function(t){var e=this;uni.showLoading(),uni.showModal({title:"提示",content:"确定要撤销该流程吗？",success:function(n){n.confirm?e.$http.post("/app/flowable/task/callback",{processInstanceId:t.processInstanceId,preTaskDefKey:t.taskDefinitionKey,preTaskId:t.id,currentTaskId:t.currentTask.id,currentTaskDefKey:t.currentTask.taskDefinitionKey}).then((function(t){var n=t.data;n&&n.success&&(uni.showToast({title:n.msg}),e.doSearch(e.curWord))})):n.cancel&&uni.hideLoading()}})},ListTouchStart:function(t){this.listTouchStart=t.touches[0].pageX},ListTouchMove:function(t){this.listTouchDirection=t.touches[0].pageX-this.listTouchStart>-60?"right":"left"},ListTouchEnd:function(t){"left"==this.listTouchDirection?this.modalName=t.currentTarget.dataset.target:this.modalName=null,this.listTouchDirection=null}}};e.default=r},a613:function(t,e,n){var i=n("24fb");e=i(!1),e.push([t.i,".ellipsis-description[data-v-b36ee944]{font-size:12px;line-height:$line-height-base;display:-webkit-box;/*作为弹性伸缩盒子模型显示*/-webkit-line-clamp:1; /*显示的行数；如果要设置2行加...则设置为2*/overflow:hidden; /*超出的文本隐藏*/text-overflow:ellipsis; /* 溢出用省略号*/-webkit-box-orient:vertical/*伸缩盒子的子元素排列：从上到下*/}.cu-list.menu-avatar>.cu-item .content[data-v-b36ee944]{position:absolute;left:29px;width:calc(100% - 77px);line-height:1.6em}.cu-bar .search-form[data-v-b36ee944]{background-color:#fff}.cu-list>.cu-item .move[data-v-b36ee944]{width:160px}.cu-list>.cu-item.move-cur[data-v-b36ee944]{-webkit-transform:translateX(-160px);transform:translateX(-160px)}",""]),t.exports=e},b587:function(t,e,n){"use strict";n.r(e);var i=n("e15f"),o=n("5fd2");for(var s in o)"default"!==s&&function(t){n.d(e,t,(function(){return o[t]}))}(s);n("0b8e");var a,c=n("f0c5"),r=Object(c["a"])(o["default"],i["b"],i["c"],!1,null,"b36ee944",null,!1,i["a"],a);e["default"]=r.exports},e15f:function(t,e,n){"use strict";var i,o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",[n("cu-custom",{attrs:{bgColor:"bg-blue",backUrl:"/pages/index/index",isBack:!0}},[n("template",{attrs:{slot:"backText"},slot:"backText"},[t._v("返回")]),n("template",{attrs:{slot:"content"},slot:"content"},[t._v("已办事项")])],2),n("v-uni-view",{style:[{top:t.CustomBar+"px"}]},[n("v-uni-view",{staticClass:"cu-bar search"},[n("v-uni-view",{staticClass:"search-form bg-white round"},[n("v-uni-text",{staticClass:"cuIcon-search"}),n("v-uni-input",{attrs:{type:"text",placeholder:"搜索","confirm-type":"search"},on:{input:function(e){arguments[0]=e=t.$handleEvent(e),t.inputWord.apply(void 0,arguments)}},model:{value:t.curWord,callback:function(e){t.curWord=e},expression:"curWord"}})],1)],1),n("mescroll-body",{ref:"mescrollRef",attrs:{up:t.upOption},on:{init:function(e){arguments[0]=e=t.$handleEvent(e),t.mescrollInit.apply(void 0,arguments)},down:function(e){arguments[0]=e=t.$handleEvent(e),t.downCallback.apply(void 0,arguments)},up:function(e){arguments[0]=e=t.$handleEvent(e),t.upCallback.apply(void 0,arguments)}}},[n("v-uni-view",{staticClass:"cu-list menu-avatar"},t._l(t.list,(function(e,i){return n("v-uni-view",{key:i,staticClass:"cu-item",class:t.modalName=="move-box-"+i?"move-cur":"",attrs:{"data-target":"move-box-"+i},on:{touchstart:function(e){arguments[0]=e=t.$handleEvent(e),t.ListTouchStart.apply(void 0,arguments)},touchmove:function(e){arguments[0]=e=t.$handleEvent(e),t.ListTouchMove.apply(void 0,arguments)},touchend:function(e){arguments[0]=e=t.$handleEvent(e),t.ListTouchEnd.apply(void 0,arguments)}}},[n("v-uni-view",{staticClass:"content",on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.toDetail(e)}}},[n("v-uni-view",{staticClass:"text-bold text-grey"},[n("v-uni-view",{staticClass:"ellipsis-description"},[t._v(t._s(e.vars.title))])],1),n("v-uni-view",{staticClass:"text-sm text-grey ellipsis-description"},[t._v("任务："+t._s(e.name))])],1),n("v-uni-view",{staticClass:"action",on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.toDetail(e)}}},[n("v-uni-view",{staticClass:"text-grey text-xs"},[t._v(t._s(t._f("formatDate")(e.endTime)))]),0===e.code||3===e.code||4===e.code||5===e.code?n("v-uni-view",{staticClass:"text-red text-xs"},[t._v(t._s(e.status))]):t._e(),1===e.code?n("v-uni-view",{staticClass:"text-orange  text-xs"},[t._v(t._s(e.status))]):t._e(),2===e.code?n("v-uni-view",{staticClass:" text-green text-xs"},[t._v(t._s(e.status))]):t._e()],1),n("v-uni-view",{staticClass:"move"},[e.isBack?n("v-uni-view",{staticClass:"bg-orange",on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.callback(e)}}},[t._v("撤回")]):t._e(),n("v-uni-view",{staticClass:"bg-blue",on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.toDetail(e)}}},[t._v("历史")])],1)],1)})),1)],1)],1)],1)},s=[];n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return s})),n.d(e,"a",(function(){return i}))},efe9:function(t,e,n){var i=n("746f");i("isConcatSpreadable")}}]);
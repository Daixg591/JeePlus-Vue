(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-test-activiti-TestActivitiExpenseForm"],{3963:function(e,t,r){"use strict";r("4de4"),r("4160"),r("a15b"),r("d81d"),r("a9e3"),r("ac1f"),r("1276"),r("159b"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i={data:function(){return{data:[],modalName:null,labels:null,treeList:[]}},props:{limit:Number,value:String,size:String,readonly:{type:Boolean,default:function(){return!1}},checkOnlyLeaf:{type:Boolean,default:function(){return!1}},showRadio:{type:Boolean,default:function(){return!1}},showCheckBox:{type:Boolean,default:function(){return!0}},disabled:{type:Boolean,default:function(){return!1}},props:{type:Object,default:function(){return{children:"children",label:"label"}}}},mounted:function(){var e=this;this.$http.get("/app/sys/user/treeData").then((function(t){var r=t.data;e.data=r.treeData,e.setTreeList(e.data);var i=[];if(e.value){var n=e.value.split(",");n.forEach((function(t){e.treeList.forEach((function(e){t===e.id&&i.push(e.label)}))})),e.labels=i.join(","),e.$refs.userTree.setCheckedKeys(n)}}))},methods:{setTreeList:function(e){for(var t in e)this.treeList.push(e[t]),e[t].children&&this.setTreeList(e[t].children)},selectUsers:function(){var e=this.$refs.userTree.getCheckedNodes().filter((function(e){return"user"===e.type})).map((function(e){return e.id})).join(","),t=this.$refs.userTree.getCheckedNodes().filter((function(e){return"user"===e.type})).map((function(e){return e.label})).join(",");this.labels=t,this.$emit("input",e),this.hideModal()},showModal:function(e){this.disabled||(this.modalName=e.currentTarget.dataset.target)},hideModal:function(e){this.modalName=null}}};t.default=i},4140:function(e,t,r){"use strict";var i=r("cc11"),n=r.n(i);n.a},"493e":function(e,t,r){"use strict";r.r(t);var i=r("ca0a"),n=r.n(i);for(var a in i)"default"!==a&&function(e){r.d(t,e,(function(){return i[e]}))}(a);t["default"]=n.a},"639d":function(e,t,r){"use strict";r.r(t);var i=r("8501"),n=r("493e");for(var a in n)"default"!==a&&function(e){r.d(t,e,(function(){return n[e]}))}(a);r("4140");var s,o=r("f0c5"),u=Object(o["a"])(n["default"],i["b"],i["c"],!1,null,"15daf2d0",null,!1,i["a"],s);t["default"]=u.exports},"72fb":function(e,t,r){var i=r("24fb");t=i(!1),t.push([e.i,".cu-form-group .title[data-v-15daf2d0]{min-width:calc(4em + 40px)}",""]),e.exports=t},"73bc":function(e,t,r){"use strict";r.r(t);var i=r("3963"),n=r.n(i);for(var a in i)"default"!==a&&function(e){r.d(t,e,(function(){return i[e]}))}(a);t["default"]=n.a},8501:function(e,t,r){"use strict";var i={"user-select":r("e812").default},n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-uni-view",[r("v-uni-form",{ref:"inputForm",staticClass:"cu-list menu",on:{submit:function(t){arguments[0]=t=e.$handleEvent(t),e.formSubmit.apply(void 0,arguments)}}},[r("v-uni-view",{staticClass:"cu-form-group margin-top"},[r("v-uni-text",{staticClass:"red-color"},[e._v("*")]),e._v("员工"),r("user-select",{model:{value:e.inputForm.user.id,callback:function(t){e.$set(e.inputForm.user,"id",t)},expression:"inputForm.user.id"}})],1),r("v-uni-view",{staticClass:"cu-form-group"},[r("v-uni-view",{staticClass:"title"},[r("v-uni-text",{staticClass:"red-color"},[e._v("*")]),e._v("报销金额")],1),r("v-uni-input",{attrs:{placeholder:"请输入报销金额",maxlength:"200",name:"cost"},model:{value:e.inputForm.cost,callback:function(t){e.$set(e.inputForm,"cost",t)},expression:"inputForm.cost"}})],1),r("v-uni-view",{staticClass:"cu-form-group"},[r("v-uni-view",{staticClass:"title"},[e._v("报销日期")]),r("v-uni-picker",{attrs:{mode:"date",value:e.inputForm.d,disabled:e.formReadOnly},on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.EndTimeChange.apply(void 0,arguments)}}},[r("v-uni-view",{staticClass:"picker"},[e._v(e._s(e.inputForm.endTime))])],1)],1),r("v-uni-view",{staticClass:"cu-form-group"},[r("v-uni-view",{staticClass:"title"},[r("v-uni-text",{staticClass:"red-color"},[e._v("*")]),e._v("报销金额")],1),r("v-uni-input",{attrs:{placeholder:"请输入报销金额",maxlength:"200",name:"cost"},model:{value:e.inputForm.cost,callback:function(t){e.$set(e.inputForm,"cost",t)},expression:"inputForm.cost"}})],1)],1)],1)},a=[];r.d(t,"b",(function(){return n})),r.d(t,"c",(function(){return a})),r.d(t,"a",(function(){return i}))},a517:function(e,t,r){"use strict";var i={"ly-tree":r("8f49").default},n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-uni-view",[r("v-uni-view",{staticClass:"action arrow",attrs:{disabled:e.disabled,"data-target":"bottomModal"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.showModal.apply(void 0,arguments)}}},[r("v-uni-view",{staticClass:"upicker uni-input ellipsis-description"},[e._v(e._s(e.labels?e.labels:"请选择"))])],1),r("v-uni-view",{staticClass:"cu-modal bottom-modal",class:"bottomModal"==e.modalName?"show":"",staticStyle:{"min-height":"200upx"}},[r("v-uni-view",{staticClass:"cu-dialog"},[r("v-uni-view",{staticClass:"cu-bar bg-white"},[r("v-uni-view",{staticClass:"action text-blue",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.hideModal.apply(void 0,arguments)}}},[e._v("取消")]),r("v-uni-view",{staticClass:"action text-green",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.selectUsers.apply(void 0,arguments)}}},[e._v("确定")])],1),r("v-uni-view",[r("ly-tree",{ref:"userTree",attrs:{"tree-data":e.data,props:e.props,"node-key":"id",checkOnClickNode:!0,showRadio:e.showRadio,"show-checkbox":e.showCheckBox,checkOnlyLeaf:e.checkOnlyLeaf}})],1)],1)],1)],1)},a=[];r.d(t,"b",(function(){return n})),r.d(t,"c",(function(){return a})),r.d(t,"a",(function(){return i}))},ca0a:function(e,t,r){"use strict";var i=r("ee27");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;i(r("2c3e"));var n=r("d7d7"),a={data:function(){return{loading:!1,index:-1,picker:this.$dictUtils.getDictList("oa_leave_type"),inputForm:{id:"",user:{id:""},cost:"",office:{id:""},reason:""}}},props:{businessId:{type:String,default:""},formReadOnly:{type:Boolean,default:!1}},components:{},watch:{businessId:{handler:function(e){this.businessId?this.init(this.businessId):this.$nextTick((function(){}))},immediate:!0,deep:!1}},methods:{StartTimeChange:function(e){this.inputForm.startTime=e.detail.value},EndTimeChange:function(e){this.inputForm.endTime=e.detail.value},PickerChange:function(e){this.index=e.detail.value,this.inputForm.leaveType=this.picker[this.index].value},init:function(e){var t=this;e&&this.$http.get("/test/activiti/testActivitiLeave/queryById?id="+e).then((function(e){var r=e.data;t.inputForm=t.recover(t.inputForm,r.testActivitiLeave)}))},saveForm:function(e){var t=[{name:"leaveType",checkType:"notnull",checkRule:"",errorMsg:"类型不能为空"},{name:"startTime",checkType:"notnull",checkRule:"",errorMsg:"请假开始时间不能为空"},{name:"endTime",checkType:"notnull",checkRule:"",errorMsg:"请假结束时间不能为空"},{name:"reason",checkType:"notnull",checkRule:"",errorMsg:"请假事由不能为"}],r=this.inputForm,i=n.check(r,t);i?(uni.showLoading(),this.$http.post("/test/activiti/testActivitiLeave/save",this.inputForm).then((function(t){var r=t.data;r&&r.success&&e(r.businessTable,r.businessId)})).catch((function(e){}))):uni.showToast({title:n.error,icon:"none"})}}};t.default=a},cc11:function(e,t,r){var i=r("72fb");"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var n=r("4f06").default;n("e1d9b29c",i,!0,{sourceMap:!1,shadowMode:!1})},d7d7:function(e,t,r){r("4160"),r("c975"),r("a9e3"),r("4d63"),r("ac1f"),r("25f0"),r("1276"),r("159b"),e.exports={error:"",check:function(e,t){for(var r=this,i=function(){if(!t[n].checkType)return{v:!0};if(!t[n].name)return{v:!0};if(!t[n].errorMsg)return{v:!0};var i=e;if(t[n].name.split(".").forEach((function(e){i=i[e]})),!i)return r.error=t[n].errorMsg,{v:!1};switch(t[n].checkType){case"string":if(s=new RegExp("^.{"+t[n].checkRule+"}$"),!s.test(i))return r.error=t[n].errorMsg,{v:!1};break;case"int":if(s=new RegExp("^(-[1-9]|[1-9])[0-9]{"+t[n].checkRule+"}$"),!s.test(i))return r.error=t[n].errorMsg,{v:!1};break;case"between":if(!r.isNumber(i))return r.error=t[n].errorMsg,{v:!1};if(a=t[n].checkRule.split(","),a[0]=Number(a[0]),a[1]=Number(a[1]),i>a[1]||i<a[0])return r.error=t[n].errorMsg,{v:!1};break;case"betweenD":if(s=/^-?[1-9][0-9]?$/,!s.test(i))return r.error=t[n].errorMsg,{v:!1};if(a=t[n].checkRule.split(","),a[0]=Number(a[0]),a[1]=Number(a[1]),i>a[1]||i<a[0])return r.error=t[n].errorMsg,{v:!1};break;case"betweenF":if(s=/^-?[0-9][0-9]?.+[0-9]+$/,!s.test(i))return r.error=t[n].errorMsg,{v:!1};if(a=t[n].checkRule.split(","),a[0]=Number(a[0]),a[1]=Number(a[1]),i>a[1]||i<a[0])return r.error=t[n].errorMsg,{v:!1};break;case"same":if(i!=t[n].checkRule)return r.error=t[n].errorMsg,{v:!1};break;case"notsame":if(i==t[n].checkRule)return r.error=t[n].errorMsg,{v:!1};break;case"email":if(s=/^\w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/,!s.test(i))return r.error=t[n].errorMsg,{v:!1};break;case"phone":if(s=/^1[0-9]{10,10}$/,!s.test(i))return r.error=t[n].errorMsg,{v:!1};break;case"url":if(s=/^http[s]?:\/\/.*/,!s.test(i))return r.error=t[n].errorMsg,{v:!1};break;case"zipcode":if(s=/^[0-9]{6}$/,!s.test(i))return r.error=t[n].errorMsg,{v:!1};break;case"reg":if(s=new RegExp(t[n].checkRule),!s.test(i))return r.error=t[n].errorMsg,{v:!1};break;case"in":if(-1==t[n].checkRule.indexOf(i))return r.error=t[n].errorMsg,{v:!1};break;case"notnull":if(null==i||i.length<1)return r.error=t[n].errorMsg,{v:!1};break}},n=0;n<t.length;n++){var a,s,o=i();if("object"===typeof o)return o.v}return!0},checkFormData:function(e){for(i=0;i<e.length;i++){var t=e[i],r=t.name,n=t.value;if(t.readable&&t.writable){if(t.options.required&&(null==n||n.length<1))return r+": "+(t.options.requiredMessage||"必填项不能为空!");if(t.options.dataType&&t.options.dataTypeCheck)switch(t.options.dataType){case"number":var a=/^-?[0-9]+(\.\d+)?$/;if(!a.test(n))return r+": "+t.options.dataTypeMessage;break;case"integer":if(!/^0$/.test(n)&&!/^(-[1-9]|[1-9])[0-9]*$/.test(n))return r+": "+t.options.dataTypeMessage;break;case"float":/^\d+(\.\d+)?$/.test(n),0;break;case"url":a=/^http[s]?:\/\/.*/;if(!a.test(n))return r+": "+t.options.dataTypeMessage;break;case"email":a=/^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+((.[a-zA-Z0-9_-]{2,3}){1,2})$/;if(!a.test(n))return r+": "+t.options.dataTypeMessage;break;case"hex":a=/^[0-9a-fA-F]{1,3}$/;if(!a.test(n))return r+": "+t.options.dataTypeMessage;break}if(t.options.pattern&&t.options.patternMessage&&t.options.patternCheck){a=new RegExp(t.options.pattern);if(!a.test(n))return r+": "+t.options.patternMessage}}}return""},isNumber:function(e){var t=/^-?[1-9][0-9]?.?[0-9]*$/;return t.test(e)}}},e812:function(e,t,r){"use strict";r.r(t);var i=r("a517"),n=r("73bc");for(var a in n)"default"!==a&&function(e){r.d(t,e,(function(){return n[e]}))}(a);var s,o=r("f0c5"),u=Object(o["a"])(n["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],s);t["default"]=u.exports}}]);